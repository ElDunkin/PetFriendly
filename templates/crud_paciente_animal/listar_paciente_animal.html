<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lista de pacientes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/generic.css">
    <link rel="stylesheet" href="/static/css/listar_usuarios.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">

</head>
<body>
    <header>
    <div class="logo">
    <nav class="menu">
        <ul>
            <li><a href="/dashboard_administrador">Dashboard</a></li>

            <!-- Gesti√≥n (submen√∫) -->
            <li class="dropdown">
                <a href="#">Gesti√≥n ‚ñº</a>
                <ul class="submenu">
                    <li><a href="/registro_usuarios">Usuarios</a></li>
                    <li><a href="/registro_paciente_animal">Pacientes</a></li>
                    <li><a href="/gestion_insumos">Insumos</a></li>
                    <li><a href="/medicamento">Medicamentos</a></li>
                    <li><a href="/registrar_animal_rescatado">Animales Rescatados</a></li>
                </ul>
            </li>

            <!-- Animales -->
            

            <!-- Donaciones (submen√∫) -->
            <li class="dropdown">
                <a href="#">Donaciones ‚ñº</a>
                <ul class="submenu">
                    <li><a href="/registrar_donacion">Medicamentos</a></li>
                    <li><a href="/donaciones_alimentos">Alimentos</a></li>
                </ul>
            </li>
        </ul>

        <div class="btn-group">
            <a href="{{ url_for('rutas_login.login') }}" class="btn-cupo">üîí Cerrar Sesi√≥n</a>
        </div>
    </nav>
</header>
    <h1>Pacientes Registrados</h1>
    {% if textM %}
        <div class="alert alert-warning">{{ textM }}</div>
    {% endif %}
    {% if text %}
        <div class="alert alert-success">{{ text }}</div>
    {% endif %}
    {% if textE %}
        <div class="alert alert-danger">{{ textE }}</div>
    {% endif %}
    <main>
        <form action="GET">
            <table>
                <thead>
                    <th>Nombre del paciente</th>
                    <th>Especie del paciente</th>
                    <th>Raza del paciente</th>
                    <th>Sexo del paciente </th>
                    <th>Peso del paciente</th>
                    <th>Color del pelaje</th>
                    <th>Fecha de naciemiento (si se conoce)</th>
                    <th>Edad estimada</th>
                    <th>¬øEs recatado?</th>
                    <th>¬øEs adoptado?</th>
                    <th>Nombre del propietario</th>
                    <th>Apellido del propietario</th>
                    <th>Acciones</th>
                </thead>
                <tbody>
                    {% for paciente in pacientes %}
                    <tr>
                        <td>{{ paciente.nombre_paciente }}</td>
                        <td>{{ paciente.especie_paciente }}</td>
                        <td>{{ paciente.raza_paciente }}</td>
                        <td>{{ paciente.sexo_paciente }}</td>
                        <td>{{ paciente.peso_paciente }}</td>
                        <td>{{ paciente.color_pelaje_paciente }}</td>
                        <td>{{ paciente.fecha_nacimiento_paciente }}</td>
                        <td>{{ paciente.edad_estimada_paciente }}</td>
                        <td>{{ paciente.rescatado }}</td>
                        <td>{{ paciente.adoptado }}</td>
                        <td>{{ paciente.nombre_usuario }}</td>
                        <td>{{ paciente.apellido_usuario }}</td>
                        <td>
                            <a href="/modificar_paciente_animal/{{ paciente.id_paciente }}" class="btn btn-success">Editar</a>
                            <a href="/eliminar_paciente_animal/{{ paciente.id_paciente }}" class="btn btn-danger">Eliminar</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </form>

        <!-- Pagination -->
<nav aria-label="Page navigation" class="mt-4">
    <ul class="pagination justify-content-center">

        {% if page > 1 %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for('rutas_usuarios.listar_usuarios', page=page-1) }}">Anterior</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <span class="page-link">Anterior</span>
        </li>
        {% endif %}

        {% set page_size = 10 %}
        {% set start_page = ((page - 1) // page_size) * page_size + 1 %}
        {% set end_page = [start_page + page_size - 1, total_pages] | min %}

        {# ---- RANGO DE P√ÅGINAS MOSTRADAS ---- #}
        {% for page_num in range(start_page, end_page + 1) %}
        <li class="page-item {% if page_num == page %}active{% endif %}">
            <a class="page-link" href="{{ url_for('rutas_usuarios.listar_usuarios', page=page_num) }}">{{ page_num }}</a>
        </li>
        {% endfor %}

        {% if page < total_pages %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for('rutas_usuarios.listar_usuarios', page=page+1) }}">Siguiente</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <span class="page-link">Siguiente</span>
        </li>
        {% endif %}
    </ul>
</nav>
        
    </main>

    <footer>
        <div>
            Copyright ¬© 2025 Developed by Trio Imperial co.
        </div>

        <div>
            Powered by Petfriendly
        </div>
    </footer>
</body>
</html>
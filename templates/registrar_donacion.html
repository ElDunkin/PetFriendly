<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registrar Donaci贸n de Medicamento</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/generic.css">
    <link rel="stylesheet" href="/static/css/registro_usuarios.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">


</head>
<body>

    <header>
        <div class="logo">
        <nav class="menu">
            
            <ul>
                <li><a href="/dashboard_administrador">Dashboard</a></li>
                <li><a href="/registro_usuarios">Gestion Usuarios</a></li>
                <li><a href="/registro_paciente_animal">Gestion Paciente</a></li>
                <li><a href="/gestion_insumos">Gestion Insumos</a></li>
                <li><a href="/registrar_animal_rescatado">Animales Rescatados</a></li>
                <li><a href="/medicamento">Gestion Medicamentos</a></li>
                <li><a href="/registrar_donacion">Donaciones</a></li>
            </ul>

            <div class="btn-group">
                <a href="{{ url_for('rutas_login.login') }}" class="btn-cupo"> Cerrar Sesi贸n</a>
            </div>
        </nav>
    </header>

    <h1>Registrar Donaci贸n de Medicamento</h1>

    <form id="form-donacion">
    <label for="fecha_donacion">Fecha de la Donaci贸n:</label>
    <input type="date" id="fecha_donacion" name="fecha_donacion" required>

    <label for="nombre_donante">Nombre del Donante:</label>
    <input type="text" id="nombre_donante" name="nombre_donante">

    <label for="contacto_donante">Telefono del Donante:</label>
    <input type="text" id="nombre_donante" name="nombre_donante">

    <label for="nombre_medicamento">Nombre del Medicamento:</label>
    <input type="text" id="nombre_medicamento" name="nombre_medicamento" required>

    <label for="presentacion">Presentaci贸n:</label>
    <input type="text" id="presentacion" name="presentacion" required>

    <label for="cantidad">Cantidad:</label>
    <input type="number" id="cantidad" name="cantidad" min="1" required>

    <label for="unidad_medida">Unidad de Medida:</label>
    <select id="unidad_medida" name="unidad_medida" required>
        <option value="tabletas">Tabletas</option>
        <option value="ml">ml</option>
        <option value="c谩psulas">C谩psulas</option>
    </select>

    <label for="lote">Lote</label>
    <input type="text" id="presentacion" name="presentacion" required>

    <label for="fecha_vencimiento">Fecha de Vencimiento</label>
    <input type="text" id="presentacion" name="presentacion" required>

    <label for="observaciones">Observaciones</label>
    <input type="text" id="presentacion" name="presentacion" required>

    <label for="estado">esstado</label>
    <select id="estado" name="estado" required>
        <option value="en revision">en revision</option>
        <option value="trasladado">trasladado</option>
        <option value="descartado">descartado</option>
    </select>


    <button type="submit" class="btn btn-success">Guardar Donaci贸n</button>
</form>
    <footer>
        <div>
            Copyright 漏 2025 Developed by Trio Imperial co.
        </div>

        <div>
            Powered by Petfriendly
        </div>
    </footer>
    <script>
        document.getElementById('form-donacion').addEventListener('submit', async (e) => {
            e.preventDefault();

            // Recolectar datos del formulario
            const formData = new FormData(e.target);
            const datos = Object.fromEntries(formData.entries());

            // Mostrar modal de confirmaci贸n
            if (confirm("驴Est谩 seguro de registrar esta donaci贸n?")) {
                try {
                    const response = await fetch('/registrar_donacion', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(datos)
                    });

                    const resultado = await response.json();
                    
                    if (response.ok) {
                        alert(resultado.mensaje); // Notificaci贸n de 茅xito
                        e.target.reset(); // Limpiar formulario
                    } else {
                        alert(`Error: ${resultado.error}`); // Notificaci贸n de error
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('Ocurri贸 un error al conectar con el servidor.');
                }
            }
        });
    </script>
</body>
</html>
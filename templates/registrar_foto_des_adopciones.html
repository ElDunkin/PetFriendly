<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/registro_usuarios.css">
    <link rel="stylesheet" href="/static/css/generic.css">
    <title>Gestion usuarios</title>
</head>
<body>
    <header>
        <div class="logo">
        <nav class="menu">
            
            <ul>
                <li><a href="/dashboard_administrador">Dashboard</a></li>
                <li><a href="/registro_usuarios">Gestion Usuarios</a></li>
                <li><a href="/registro_paciente_animal">Gestion Paciente</a></li>
                <li><a href="/gestion_insumos">Gestion Insumos</a></li>
                <li><a href="/medicamento">Gestion Medicamentos</a></li>
            </ul>

            <div class="btn-group">
                <a href="{{ url_for('rutas_login.login') }}" class="btn-cupo">游 Cerrar Sesi칩n</a>
            </div>
        </nav>
    </header>

    <h1>Registro de adopciones</h1>
    {% if text %}
    <div class="alert alert-info">{{ text }}</div>
    {% endif %}

    <form action="/registro_foto_des_adopcion" method="POST" enctype="multipart/form-data" class="container mt-4">
        <!-- Selecci칩n de animal -->
        <div class="mb-3">
            <label for="id_rescatado" class="form-label">Seleccionar Animal Rescatado</label>
            <select class="form-select" name="id_rescatado" id="id_rescatado" required>
                <option value="">Seleccione un animal...</option>
                {% for animal in animales %}
                <option value="{{ animal[0] }}">{{ animal[1] }} - {{ animal[2] }} ({{ animal[3] }})</option>
                {% endfor %}
            </select>
        </div>

        <div class="row">
            <div class="col-md-6">
                <!-- Datos b치sicos del animal (autocompletados) -->
                <label>Nombre</label>
                <input type="text" class="form-control" name="nombre" id="nombre" required readonly>

                <label>Especie</label>
                <input type="text" class="form-control" name="especie" id="especie" required readonly>

                <label>Raza</label>
                <input type="text" class="form-control" name="raza" id="raza" required readonly>

                <label>Sexo</label>
                <input type="text" class="form-control" name="sexo" id="sexo" required readonly>

                <label>Edad aproximada</label>
                <input type="number" class="form-control" name="edad_aproximada" id="edad_aproximada" required readonly>
            </div>

            <div class="col-md-6">
                <!-- Campos adicionales para adopci칩n -->
                <label>Estado de salud</label>
                <select class="form-select" name="estado_salud" required>
                    <option value="Saludable">Saludable</option>
                    <option value="En tratamiento">En tratamiento</option>
                    <option value="Grave">Grave</option>
                </select>

                <label>Car치cter</label>
                <select class="form-select" name="caracter" required>
                    <option value="Sociable">Sociable</option>
                    <option value="T칤mido">T칤mido</option>
                    <option value="Activo">Activo</option>
                </select>

                <label>Comportamiento con humanos</label>
                <textarea class="form-control" name="comportamiento_humanos" rows="2" required></textarea>

                <label>Comportamiento con otros animales</label>
                <textarea class="form-control" name="comportamiento_animales" rows="2" required></textarea>
            </div>
        </div>

        <label class="mt-3">Historia del animal</label>
        <textarea name="historia" class="form-control" rows="3" required></textarea>

        <label class="mt-3">Subir fotos del animal (1-5 fotos, m치ximo 2MB cada una, JPG/PNG)</label>
        <input type="file" name="fotos" id="fotos" accept="image/jpeg,image/jpg,image/png" multiple class="form-control" required>
        <div id="preview" class="mt-3 d-flex flex-wrap gap-2"></div>

        <button type="submit" class="btn btn-primary mt-4">Registrar Informaci칩n para Adopci칩n</button>
    </form>

    <footer>
        <div>
            Copyright 춸 2025 Developed by Trio Imperial co.
        </div>

        <div>
            Powered by Petfriendly
        </div>
    </footer>

    <script>
        document.getElementById('fotos').addEventListener('change', function(event) {
            const preview = document.getElementById('preview');
            preview.innerHTML = '';

            const files = event.target.files;
            if (files.length > 5) {
                alert('M치ximo 5 im치genes permitidas');
                event.target.value = '';
                return;
            }

            for (let i = 0; i < files.length; i++) {
                const file = files[i];

                // Validar tama침o
                if (file.size > 2 * 1024 * 1024) {
                    alert(`La imagen ${file.name} excede los 2MB`);
                    event.target.value = '';
                    return;
                }

                // Validar formato
                const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png'];
                if (!allowedTypes.includes(file.type)) {
                    alert(`La imagen ${file.name} debe ser JPG o PNG`);
                    event.target.value = '';
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.style.width = '150px';
                    img.style.height = '150px';
                    img.style.objectFit = 'cover';
                    img.classList.add('border', 'rounded');
                    preview.appendChild(img);
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>
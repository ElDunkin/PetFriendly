<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/generic.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="stylesheet" href="/static/css/dashboard_med.css">
    <link rel="stylesheet" href="/static/css/generic.css">
    
    <title>Dashboard | {{ session['rol'] }}</title>
</head>
        
<body>
    <header>
        <div class="logo">
        <nav class="menu">
            <ul>
                <li><a href="/dashboard_administrador">Dashboard</a></li>

                <!-- Gesti√≥n (submen√∫) -->
                <li class="dropdown">
                    <a href="#">Gesti√≥n ‚ñº</a>
                    <ul class="submenu">
                        <li><a href="/registro_usuarios">Usuarios</a></li>
                        <li><a href="/registro_paciente_animal">Pacientes</a></li>
                        <li><a href="/gestion_insumos">Insumos</a></li>
                        <li><a href="/medicamento">Medicamentos</a></li>
                        <li><a href="/registrar_animal_rescatado">Animales Rescatados</a></li>
                        <li><a href="/carne_vacunas">Carn√© de Vacunas</a></li>
                        <li><a href="/jornadas">Jornadas</a></li>
                        <li><a href="/citas">Citas</a></li>
                    </ul>
                </li>

                <!-- Animales -->
                

                <!-- Donaciones (submen√∫) -->
                <li class="dropdown">
                    <a href="#">Donaciones ‚ñº</a>
                    <ul class="submenu">
                        <li><a href="/registrar_donacion">Medicamentos</a></li>
                        <li><a href="/donaciones_alimentos">Alimentos</a></li>
                    </ul>
                </li>
            </ul>

            <div class="btn-group">
                <a href="{{ url_for('rutas_login.login') }}" class="btn-cupo">üîí Cerrar Sesi√≥n</a>
            </div>
        </nav>
    </header>
    

<main>

  <h2>üë®‚Äç‚öïÔ∏è Dashboard M√©dico</h2>

  <div class="grid grid-cols-2 gap-6">

    <!-- Pacientes atendidos -->
    <div class="card">
      <h3>üìä Pacientes atendidos por mes</h3>
      <canvas id="pacientesMes"></canvas>
    </div>

    <!-- Pr√≥ximas citas -->
    <div class="card col-span-2">
      <h3>üìÖ Pr√≥ximas Citas</h3>
      <table>
        <thead>
          <tr><th>Paciente</th><th>Fecha</th><th>Hora</th></tr>
        </thead>
        <tbody>
          {% for c in proximas_citas %}
          <tr>
            <td>{{c.paciente}}</td>
            <td>{{c.fecha}}</td>
            <td>{{c.hora}}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Consultas por tipo -->
    <div class="card">
      <h3>üìã Consultas por estado</h3>
      <canvas id="consultasTipo"></canvas>
    </div>

  </div>
</main>

    <footer>
        <div>
            Copyright ¬© 2025 Developed by Trio Imperial co.
        </div>

        <div>
            Powered by Petfriendly
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Gr√°fico Pacientes por Mes
  const ctxPacientes = document.getElementById("pacientesMes");
  if (ctxPacientes) {
    new Chart(ctxPacientes, {
      type: 'bar',
      data: {
        labels: {{ meses_labels|safe }},
        datasets: [{
          label: 'Pacientes',
          data: {{ meses_data|safe }},
          backgroundColor: 'rgba(54, 162, 235, 0.7)',
          borderColor: '#0C254B',
          borderWidth: 2,
          borderRadius: 8
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          title: {
            display: true,
            font: { size: 18, weight: 'bold' }
          }
        },
        scales: { y: { beginAtZero: true } }
      }
    });
  }

  // Gr√°fico Consultas por Tipo
  const ctxConsultas = document.getElementById("consultasTipo");
  if (ctxConsultas) {
    new Chart(ctxConsultas, {
      type: 'doughnut',
      data: {
        labels: {{ tipo_labels|safe }},
        datasets: [{
          data: {{ tipo_data|safe }},
          backgroundColor: [
            '#FF6384', '#36A2EB', '#FFCE56',
            '#4BC0C0', '#9966FF', '#F41F00'
          ],
          hoverOffset: 15
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'bottom' },
          title: {
            display: true,
            font: { size: 18, weight: 'bold' }
          }
        }
      }
    });
  }
</script>

</body>
</html>